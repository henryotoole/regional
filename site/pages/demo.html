<!DOCTYPE html>
<!-- REGIONAL DEMO JOSH REED 2024 -->

<html>
	<head>
		<!-- Dynamically-generated import map -->
		<script>
			/**
			 * This little script exists to illustrate the possibility of switching to development mode or
			 * bundled-source mode with a variable. If the dev variable was pointed at a cookie of some sort,
			 * this could be done automatically on the basis of server-wide config.
			 * 
			 * However, this demo site has no backend and so this little example remains.
			 */

			const dev = false
			
			const importmap_json = {
				imports: {
					"regional": "../js/regional_0.1.0.js",
					"demo": "../js/demo_0.1.0.js"
				}
			}

			if(dev)
			{
				importmap_json.imports.regional = "../../src/regional/regional.js"
				importmap_json.imports.demo = "../../src/demo/demo.js"
			}

			const importmap = document.createElement("script")
			importmap.type = "importmap"
			importmap.textContent = JSON.stringify(importmap_json)
			document.currentScript.after(importmap)
		</script>
		
		<script type="module" async>

			import { RegSWDemo } from "demo";
			// Instantiate the switchyard - everything else propagates from here or events generated by the user
			(new RegSWDemo()).link().load().then(()=>{console.log("Loaded! ^^")})

		</script>
		<link rel="stylesheet" href="/site/assets/demo.css">
	</head>

	<body>
		<h1> REGIONAL DEMO </h1>
		<div class="master-layout">
			<div id="reg_telescope" class="reg-telescope">
				<div class="spread">
					<button rfm_member="zoom_in" class="zoom-btn">+</button>
					<button rfm_member="zoom_out" class="zoom-btn">-</button>
				</div>
				<div class="portal-cont">
					<div rfm_member="portal" class="portal">
						<img rfm_member="view" class="view">
					</div>
				</div>
			</div>
			<div class="reg-text"></div>
		</div>
	</body>
</html>